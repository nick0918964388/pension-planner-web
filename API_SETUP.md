# 市場數據 API 設定指南

## 功能說明

本退休金規劃器現已支援使用**真實歷史市場數據**進行蒙地卡羅模擬！

## 數據來源選項

### 1. 真實歷史數據（推薦）
使用 Alpha Vantage API 獲取真實的 S&P 500 和 10年期公債歷史數據。

**優點：**
- 基於真實市場歷史
- 反映實際市場波動和相關性
- 更準確的退休規劃預測

**如何使用：**

#### 選項 A：使用 API Key（推薦）
1. 前往 [Alpha Vantage](https://www.alphavantage.co/support/#api-key) 免費註冊 API Key
2. 複製 `.env.example` 為 `.env`
   ```bash
   cp .env.example .env
   ```
3. 在 `.env` 文件中填入您的 API Key
   ```
   VITE_ALPHA_VANTAGE_API_KEY=your_actual_api_key_here
   ```
4. 重新啟動開發伺服器
   ```bash
   npm run dev
   ```

#### 選項 B：使用備用數據
如果沒有 API Key，系統會自動使用備用的歷史統計數據：
- 基於 1928-2024 年的真實統計分佈
- S&P 500：平均回報 10%，標準差 20%
- 10年期公債：平均回報 5%，標準差 8%
- 通膨：平均 3%，標準差 4%

### 2. 簡化模擬數據
使用簡化的統計模型進行模擬（原始方法）。

## API 限制

Alpha Vantage 免費層級：
- 每分鐘最多 5 次請求
- 每天最多 500 次請求

## 使用說明

1. 在應用程式中選擇「數據來源」
2. 選擇「真實歷史數據 (1928-2024)」
3. 系統會自動載入市場數據
4. 如果看到綠色提示，表示數據載入成功
5. 如果看到黃色提示，表示使用備用數據

## 技術細節

- **數據更新**：首次使用時自動載入，之後會快取
- **Portfolio 選項**：
  - 平衡型：50% S&P 500 + 50% 10年期公債
  - 積極型：80% S&P 500 + 20% 10年期公債
  - 保守型：20% S&P 500 + 80% 10年期公債

## 常見問題

**Q: 為什麼需要 API Key？**
A: Alpha Vantage 提供免費的市場數據 API，但需要註冊以防止濫用。

**Q: 沒有 API Key 還能使用嗎？**
A: 可以！系統會自動切換到備用的歷史統計數據。

**Q: 數據多久更新一次？**
A: 每次重新載入頁面時會嘗試從 API 獲取最新數據。

**Q: 備用數據準確嗎？**
A: 備用數據基於 1928-2024 年的真實統計分佈，提供合理的估算。

## 支援

如有問題，請查看：
- [Alpha Vantage 文檔](https://www.alphavantage.co/documentation/)
- [專案 GitHub Issues](../../issues)
